Performance Data
================

Date
----

2023-12-09

Environments
------------

- CPU: AMD EPYC 7702P 64-Core Processor 2GHz
- Memory: 256 GiB
- Operating System: Ubuntu 22.04
- Compilers
  - gcc 11.3.0
  - go 1.21.5
  - Python 3.12.0
    - Note: Python 3.12 has optimized performance
  - Pypy 3.10 v7.3.13
  - Deno 1.38.5
  - Bun 1.0.15
- Method: 5 times, take average. Encode does not include signing.
- Library Versions
  - ndn-cxx: [0.8.1](https://github.com/named-data/ndn-cxx/commit/81de5d98e92c30dfb7827f8143080b379dc2a51d)
  - go-ndn: [v0.0.6](https://github.com/zjkmxy/go-ndn/commit/2e42d595c02b3b60ec55893099b885bcbd546101)
  - python-ndn: [v0.4.1](https://github.com/named-data/python-ndn/commit/7b9ab6ed23d1260f6592d4529fc15c8121456a64)
  - NDNts: 0.0.20231126-nightly-2870797

Summary
-------

### Performance Time

Total time for `10^6` packets.

|              | Enc 1       | Enc 2       | Enc 3       | Dec 1      | Dec 2      | Dec 3       |
|--------------|-------------|-------------|-------------|------------|------------|-------------|
| N Packets    |     1000000 |             |             |            |            |             |
| Total Bytes  |       189MB |      4093MB |       189MB |      189MB |     4093MB |       189MB |
| Name Length  |           3 |           3 |          33 |          3 |          3 |          33 |
|--------------|-------------|-------------|-------------|------------|------------|-------------|
| go-ndn       |  1.18±0.02s |  1.10±0.02s |  3.91±0.03s | 1.80±0.02s | 2.05±0.02s |  3.76±0.02s |
| Reflect      |  3.19±0.02s |  5.13±0.01s |    4.7±0.3s | 3.37±0.02s | 3.45±0.01s |  5.43±0.08s |
| CodeGen      |  0.42±0.02s |  1.21±0.03s |    2.4±0.2s | 0.44±0.01s | 0.45±0.01s |  1.89±0.02s |
| protobuf (*) |  1.15±0.01s |  2.16±0.02s |  3.38±0.02s |            |            |             |
| json     (*) |  1.78±0.02s |  5.68±0.02s |  4.39±0.03s |            |            |             |
|--------------|-------------|-------------|-------------|------------|------------|-------------|
| ndn-cxx      |  4.64±0.01s |  4.87±0.04s |   24.7±0.2s | 1.00±0.01s | 1.00±0.01s |  2.12±0.01s |
| C++ template |  0.64±0.01s |  0.85±0.01s |  3.95±0.02s | 0.44±0.01s | 0.77±0.01s |  1.48±0.01s |
|--------------|-------------|-------------|-------------|------------|------------|-------------|
| python-ndn   |   48.4±0.2s |   50.3±0.1s |  119.6±0.6s |  22.6±0.2s |  24.6±0.2s |   33.7±0.2s |
| (pypy3)      | 13.77±0.04s | 16.44±0.09s |   35.7±0.6s | 4.51±0.04s |   4.8±0.2s |  4.88±0.04s |
|--------------|-------------|-------------|-------------|------------|------------|-------------|
| NDNts (deno) |   50.6±0.3s |   54.1±0.5s |   87.4±0.7s |  13.0±0.3s | 4.82±0.05s |   13.1±0.3s |
| NDNts  (bun) | 39.32±0.09s |   43.3±0.2s |   65.8±0.2s |  14.1±0.2s | 4.83±0.03s |   14.7±0.5s |

(*): JSON and Protobuf use different encoding from TLV. Put here for reference only.

### Time delta

This table shows the computed incremental time per payload and name component.
Time in this table is per one packet, so 1s in the last table becomes 1μs.

The two empty cells in the Payload column are because the number is less than SEM and considered as "too small to measure".
Should be considered as 0.

|              | Enc Base (μs) | Payload (μs/kB) | NameComp (μs/1) | Dec Base (μs) | Payload (μs/kB) | NameComp (μs/1) |
|--------------|---------------|-----------------|-----------------|---------------|-----------------|-----------------|
| go-ndn       |     0.91±0.02 |           ±0.01 |       0.09±0.01 |     1.59±0.02 |       0.06±0.01 |       0.07±0.01 |
| Reflect      |     2.95±0.03 |       0.49±0.01 |       0.05±0.01 |     3.16±0.02 |       0.02±0.01 |       0.07±0.01 |
| CodeGen      |     0.19±0.02 |       0.20±0.01 |       0.06±0.01 |     0.29±0.01 |           ±0.01 |       0.05±0.01 |
| protobuf (*) |     0.88±0.01 |       0.26±0.01 |       0.07±0.01 |               |                 |                 |
| json     (*) |     1.33±0.02 |       1.00±0.01 |       0.09±0.01 |               |                 |                 |
|--------------|---------------|-----------------|-----------------|---------------|-----------------|-----------------|
| ndn-cxx      |     2.62±0.02 |       0.06±0.01 |       0.67±0.01 |     0.88±0.01 |           ±0.01 |       0.04±0.01 |
| C++ template |     0.30±0.01 |       0.05±0.01 |       0.11±0.01 |     0.32±0.01 |       0.08±0.01 |       0.03±0.01 |
|--------------|---------------|-----------------|-----------------|---------------|-----------------|-----------------|
| python-ndn   |      41.1±0.2 |       0.49±0.04 |       2.38±0.03 |      21.4±0.2 |       0.51±0.07 |       0.37±0.01 |
| (pypy3)      |    11.45±0.07 |       0.69±0.03 |       0.73±0.02 |     4.46±0.04 |       0.08±0.05 |           ±0.01 |
|--------------|---------------|-----------------|-----------------|---------------|-----------------|-----------------|
| NDNts (deno) |      46.8±0.3 |         0.9±0.2 |       1.23±0.03 |      13.4±0.3 |  -2.10±0.08 (?) |           ±0.02 |
| NDNts  (bun) |    36.49±0.09 |       1.02±0.04 |       0.88±0.01 |      14.5±0.2 |  -2.39±0.04 (?) |           ±0.02 |
